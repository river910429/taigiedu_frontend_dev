{
  "openapi": "3.0.3",
  "info": {
    "title": "taiwaneseOMG Frontend-Inferred API",
    "version": "0.1.0",
    "description": "Inferred from frontend fetch calls (VITE_API_URL)."
  },
  "servers": [
    {
      "url": "{apiBaseUrl}",
      "description": "Base URL aligned with VITE_API_URL",
      "variables": {
        "apiBaseUrl": {
          "default": "http://localhost:3000"
        }
      }
    }
  ],
  "tags": [
    { "name": "TTS" },
    { "name": "Translation" },
    { "name": "STT" },
    { "name": "Search" },
    { "name": "Idiom" },
    { "name": "Resource" },
    { "name": "User" },
    { "name": "Culture" },
    { "name": "Celebrity" },
    { "name": "Social" },
    { "name": "Exam" },
    { "name": "Info" }
  ],
  "paths": {
    "/synthesize_speech": {
      "post": {
        "tags": ["TTS"],
        "summary": "Synthesize speech from text",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/TtsRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Base64 audio (wav) string",
            "content": {
              "text/plain": {
                "schema": { "type": "string", "description": "Base64 audio content" }
              }
            }
          }
        }
      }
    },
    "/convert_taibun": {
      "post": {
        "tags": ["Translation"],
        "summary": "Convert Taiwanese text between writing systems",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/TaibunConvertRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Converted text",
            "content": {
              "text/plain": { "schema": { "type": "string" } }
            }
          }
        }
      }
    },
    "/submit_tc_feedback": {
      "post": {
        "tags": ["Translation"],
        "summary": "Submit translation correction feedback",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/TcFeedbackRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Feedback accepted",
            "content": { "application/json": { "schema": { "type": "object" } } }
          }
        }
      }
    },
    "/transcribe_speech": {
      "post": {
        "tags": ["STT"],
        "summary": "Transcribe speech audio (base64) to text",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SttTranscribeRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Transcription result",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/SttTranscribeResponse" } }
            }
          }
        }
      }
    },
    "/submit_stt_feedback": {
      "post": {
        "tags": ["STT"],
        "summary": "Submit STT correction feedback",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SttFeedbackRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Feedback accepted",
            "content": { "application/json": { "schema": { "type": "object" } } }
          }
        }
      }
    },
    "/top_keywords": {
      "post": {
        "tags": ["Search"],
        "summary": "Collect keyword statistics from input text",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/TopKeywordsRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Keyword list",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/TopKeywordsResponse" } } }
          }
        }
      }
    },
    "/sentence_search": {
      "post": {
        "tags": ["Search"],
        "summary": "Search sentences/documents",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SentenceSearchRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Search results",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/SentenceSearchResponse" } } }
          }
        }
      }
    },
    "/idiom_random": {
      "post": {
        "tags": ["Idiom"],
        "summary": "Get a random idiom",
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "type": "object" } } }
        },
        "responses": {
          "200": {
            "description": "Random idiom",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/IdiomRandomResponse" } } }
          }
        }
      }
    },
    "/idiom_search": {
      "post": {
        "tags": ["Idiom"],
        "summary": "Search idioms by keyword/category",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/IdiomSearchRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Idiom search results",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/IdiomSearchResponse" } } }
          }
        }
      }
    },
    "/info/test": {
      "post": {
        "tags": ["Info"],
        "summary": "Get exam info list",
        "responses": {
          "200": {
            "description": "Exam info list",
            "content": { "application/json": { "schema": { "type": "array", "items": { "type": "object" } } } }
          }
        }
      }
    },
    "/info/news": {
      "post": {
        "tags": ["Info"],
        "summary": "Get news info list",
        "responses": {
          "200": {
            "description": "News info list",
            "content": { "application/json": { "schema": { "type": "array", "items": { "type": "object" } } } }
          }
        }
      }
    },
    "/events": {
      "post": {
        "tags": ["Info"],
        "summary": "Get today events",
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "type": "object" } } }
        },
        "responses": {
          "200": {
            "description": "Events list",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/EventsResponse" } } }
          }
        }
      }
    },
    "/media": {
      "post": {
        "tags": ["Social"],
        "summary": "Get social media resources",
        "responses": {
          "200": {
            "description": "Social media data",
            "content": { "application/json": { "schema": { "type": "object" } } }
          }
        }
      }
    },
    "/exam_list": {
      "post": {
        "tags": ["Exam"],
        "summary": "Get exam list by category",
        "responses": {
          "200": {
            "description": "Exam list data",
            "content": { "application/json": { "schema": { "type": "object" } } }
          }
        }
      }
    },
    "/culture/food": {
      "post": {
        "tags": ["Culture"],
        "summary": "Get food culture list",
        "responses": {
          "200": {
            "description": "Food list",
            "content": { "application/json": { "schema": { "type": "array", "items": { "type": "object" } } } }
          }
        }
      }
    },
    "/culture/festival": {
      "post": {
        "tags": ["Culture"],
        "summary": "Get festival culture list",
        "responses": {
          "200": {
            "description": "Festival list",
            "content": { "application/json": { "schema": { "type": "array", "items": { "type": "object" } } } }
          }
        }
      }
    },
    "/celebrity/list": {
      "post": {
        "tags": ["Celebrity"],
        "summary": "Get celebrity list",
        "responses": {
          "200": {
            "description": "Celebrity list",
            "content": { "application/json": { "schema": { "type": "array", "items": { "type": "object" } } } }
          }
        }
      }
    },
    "/celebrity/detail": {
      "post": {
        "tags": ["Celebrity"],
        "summary": "Get celebrity detail by name",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/CelebrityDetailRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Celebrity detail data",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/CelebrityDetailResponse" } } }
          }
        }
      }
    },
    "/api/resource/versions": {
      "get": {
        "tags": ["Resource"],
        "summary": "Get resource versions mapping",
        "responses": {
          "200": {
            "description": "Version mapping",
            "content": { "application/json": { "schema": { "type": "object" } } }
          }
        }
      }
    },
    "/api/resource/search": {
      "post": {
        "tags": ["Resource"],
        "summary": "Search resources",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ResourceSearchRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Resource search result",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/ResourceSearchResponse" } } }
          }
        }
      }
    },
    "/api/resource/upload": {
      "post": {
        "tags": ["Resource"],
        "summary": "Upload a resource (multipart)",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": { "$ref": "#/components/schemas/ResourceUploadRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Upload result",
            "content": { "application/json": { "schema": { "type": "object" } } }
          }
        }
      }
    },
    "/api/resource/delete": {
      "post": {
        "tags": ["Resource"],
        "summary": "Delete a resource",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ResourceDeleteRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Delete result",
            "content": { "application/json": { "schema": { "type": "object" } } }
          }
        }
      }
    },
    "/api/user/register": {
      "post": {
        "tags": ["User"],
        "summary": "Register new user",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/RegisterRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Register result",
            "content": { "application/json": { "schema": { "type": "object" } } }
          }
        }
      }
    },
    "/api/user/resend-verification": {
      "post": {
        "tags": ["User"],
        "summary": "Resend verification email",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ResendVerificationRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Resend result",
            "content": { "application/json": { "schema": { "type": "object" } } }
          }
        }
      }
    },
    "/api/captcha": {
      "get": {
        "tags": ["User"],
        "summary": "Get captcha",
        "responses": {
          "200": {
            "description": "Captcha payload",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/CaptchaResponse" } } }
          }
        }
      }
    },
    "/api/user/login": {
      "post": {
        "tags": ["User"],
        "summary": "User login",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/LoginRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login result",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/LoginResponse" } } }
          }
        }
      }
    },
    "/api/user/google_login": {
      "post": {
        "tags": ["User"],
        "summary": "Google login",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/GoogleLoginRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Google login result",
            "content": { "application/json": { "schema": { "type": "object" } } }
          }
        }
      }
    },
    "/api/user/request_password_reset": {
      "post": {
        "tags": ["User"],
        "summary": "Request password reset (send OTP)",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/RequestPasswordResetRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Request result",
            "content": { "application/json": { "schema": { "type": "object" } } }
          }
        }
      }
    },
    "/api/user/confirm_password_reset": {
      "post": {
        "tags": ["User"],
        "summary": "Confirm password reset with OTP",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ConfirmPasswordResetRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Reset result",
            "content": { "application/json": { "schema": { "type": "object" } } }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "TtsRequest": {
        "type": "object",
        "required": ["tts_lang", "tts_data"],
        "properties": {
          "tts_lang": { "type": "string", "description": "Language code, e.g. tb/tl/poj" },
          "tts_data": { "type": "string", "description": "Text to synthesize" }
        }
      },
      "TaibunConvertRequest": {
        "type": "object",
        "required": ["taibun_mode", "taibun_data"],
        "properties": {
          "taibun_mode": { "type": "string", "description": "Conversion mode, e.g. tbn2tl" },
          "taibun_data": { "type": "string" }
        }
      },
      "TcFeedbackRequest": {
        "type": "object",
        "required": ["mode", "inputText", "correctedText"],
        "properties": {
          "mode": { "type": "string", "description": "e.g. zh_to_tl" },
          "inputText": { "type": "string" },
          "correctedText": { "type": "string" }
        }
      },
      "SttTranscribeRequest": {
        "type": "object",
        "required": ["stt_type", "stt_lang", "stt_data"],
        "properties": {
          "stt_type": { "type": "string", "description": "base64" },
          "stt_lang": { "type": "string", "description": "tw" },
          "stt_data": { "type": "string", "description": "Base64 audio content" }
        }
      },
      "SttTranscribeResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "object",
            "properties": {
              "tw": { "type": "string" },
              "tl": { "type": "string" },
              "poj": { "type": "string" }
            }
          }
        }
      },
      "SttFeedbackRequest": {
        "type": "object",
        "required": ["audio_text", "audio_lang", "audio_data"],
        "properties": {
          "audio_text": { "type": "string" },
          "audio_lang": { "type": "string", "description": "tb/tl/poj" },
          "audio_data": { "type": "string", "description": "Base64 audio content" }
        }
      },
      "TopKeywordsRequest": {
        "type": "object",
        "required": ["text"],
        "properties": {
          "text": { "type": "string" }
        }
      },
      "TopKeywordsResponse": {
        "type": "object",
        "properties": {
          "status": { "type": "string" },
          "data": {
            "type": "array",
            "items": { "type": "string" }
          }
        }
      },
      "IdiomRandomResponse": {
        "type": "object",
        "properties": {
          "status": { "type": "string" },
          "data": { "type": "object" }
        }
      },
      "IdiomSearchRequest": {
        "type": "object",
        "required": ["search_keyword", "category"],
        "properties": {
          "search_keyword": { "type": "string" },
          "category": {
            "oneOf": [
              { "type": "string" },
              { "type": "array", "items": { "type": "string" } }
            ]
          }
        }
      },
      "IdiomSearchResponse": {
        "type": "object",
        "properties": {
          "data": {
            "type": "object",
            "properties": {
              "phrases": { "type": "array", "items": { "type": "object" } }
            }
          }
        }
      },
      "SentenceSearchRequest": {
        "type": "object",
        "required": ["text", "size", "mark", "tags", "lang"],
        "properties": {
          "text": { "type": "string" },
          "size": { "type": "integer" },
          "mark": { "type": "boolean" },
          "tags": { "type": "array", "items": { "type": "string" } },
          "lang": { "type": "array", "items": { "type": "string" } }
        }
      },
      "SentenceSearchResponse": {
        "type": "object",
        "properties": {
          "data": {
            "type": "object",
            "properties": {
              "documents": { "type": "array", "items": { "type": "object" } }
            }
          }
        }
      },
      "EventsResponse": {
        "type": "object",
        "properties": {
          "status": { "type": "string" },
          "data": { "type": "array", "items": { "type": "string" } }
        }
      },
      "ResourceSearchRequest": {
        "type": "object",
        "required": ["stage", "version", "keyword", "searchContent", "page", "limit"],
        "properties": {
          "stage": { "type": "string" },
          "version": {
            "oneOf": [
              { "type": "string" },
              { "type": "array", "items": { "type": "string" } }
            ]
          },
          "keyword": { "type": "string" },
          "searchContent": { "type": "string" },
          "page": { "type": "integer" },
          "limit": { "type": "integer" }
        }
      },
      "ResourceSearchResponse": {
        "type": "object",
        "properties": {
          "status": { "type": "string" },
          "data": {
            "type": "object",
            "properties": {
              "resources": { "type": "array", "items": { "type": "object" } }
            }
          }
        }
      },
      "ResourceUploadRequest": {
        "type": "object",
        "required": [
          "uploader_id",
          "uploader_name",
          "title",
          "grade",
          "version",
          "book",
          "contentType",
          "fileType",
          "likes",
          "downloads",
          "tags",
          "file"
        ],
        "properties": {
          "uploader_id": { "type": "string" },
          "uploader_name": { "type": "string" },
          "title": { "type": "string" },
          "grade": { "type": "string" },
          "version": { "type": "string" },
          "book": { "type": "string" },
          "contentType": { "type": "string" },
          "fileType": { "type": "string" },
          "likes": { "type": "integer" },
          "downloads": { "type": "integer" },
          "tags": { "type": "string" },
          "file": { "type": "string", "format": "binary" }
        }
      },
      "ResourceDeleteRequest": {
        "type": "object",
        "required": ["resourceId", "username"],
        "properties": {
          "resourceId": { "type": "integer" },
          "username": { "type": "integer", "description": "Actually userId per frontend" }
        }
      },
      "RegisterRequest": {
        "type": "object",
        "required": [
          "email",
          "password",
          "confirmPassword",
          "lastName",
          "firstName",
          "profession",
          "organization",
          "usagePurpose"
        ],
        "properties": {
          "email": { "type": "string" },
          "password": { "type": "string" },
          "confirmPassword": { "type": "string" },
          "lastName": { "type": "string" },
          "firstName": { "type": "string" },
          "profession": { "type": "string" },
          "professionOther": { "type": "string" },
          "organization": { "type": "string" },
          "usagePurpose": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["type"],
              "properties": {
                "type": { "type": "string" },
                "custom": { "type": "string" }
              }
            }
          }
        }
      },
      "ResendVerificationRequest": {
        "type": "object",
        "required": ["email"],
        "properties": {
          "email": { "type": "string" }
        }
      },
      "CaptchaResponse": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "image": { "type": "string" }
        }
      },
      "LoginRequest": {
        "type": "object",
        "required": ["username", "password", "captchaId", "captcha"],
        "properties": {
          "username": { "type": "string" },
          "password": { "type": "string" },
          "captchaId": { "type": "string" },
          "captcha": { "type": "string" }
        }
      },
      "LoginResponse": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "token": { "type": "string" },
          "userId": { "type": "string" },
          "message": { "type": "string" }
        }
      },
      "GoogleLoginRequest": {
        "type": "object",
        "required": ["credential"],
        "properties": {
          "credential": { "type": "string" }
        }
      },
      "RequestPasswordResetRequest": {
        "type": "object",
        "required": ["email"],
        "properties": {
          "email": { "type": "string" }
        }
      },
      "ConfirmPasswordResetRequest": {
        "type": "object",
        "required": ["email", "otp", "newPassword", "confirmPassword"],
        "properties": {
          "email": { "type": "string" },
          "otp": { "type": "integer" },
          "newPassword": { "type": "string" },
          "confirmPassword": { "type": "string" }
        }
      },
      "CelebrityDetailRequest": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": { "type": "string" }
        }
      },
      "CelebrityDetailResponse": {
        "type": "object",
        "properties": {
          "basicInfo": { "type": "object" },
          "experience": { "type": "array", "items": { "type": "string" } },
          "works_categories": { "type": "array", "items": { "type": "string" } },
          "works_items": { "type": "object" },
          "resources": { "type": "array", "items": { "type": "object" } },
          "metaverse": { "type": "array", "items": { "type": "string" } },
          "awards": { "type": "array", "items": { "type": "string" } }
        }
      }
    }
  }
}
